{"version":3,"file":"cubejs-client-vue3.js","sources":["../src/QueryRenderer.js","../src/QueryBuilder.js","../src/index.js"],"sourcesContent":["import { toPairs, fromPairs } from 'ramda';\nimport { isQueryPresent, areQueriesEqual } from '@cubejs-client/core';\nimport { h as createElement } from 'vue';\n\nexport default {\n  props: {\n    query: {\n      type: [Object, Array],\n      default: () => ({}),\n    },\n    // TODO: validate with current react implementation\n    queries: {\n      type: Object,\n    },\n    loadSql: {\n      required: false,\n    },\n    cubejsApi: {\n      type: Object,\n      required: true,\n    },\n    builderProps: {\n      type: Object,\n      required: false,\n      default: () => ({}),\n    },\n    chartType: {\n      type: String,\n      required: false,\n    },\n  },\n  data() {\n    return {\n      mutexObj: {},\n      error: undefined,\n      resultSet: undefined,\n      loading: false,\n      sqlQuery: undefined,\n    };\n  },\n  async mounted() {\n    const { query, queries } = this;\n\n    if (isQueryPresent(query)) {\n      await this.load();\n    } else if (isQueryPresent(queries)) {\n      await this.loadQueries(queries);\n    }\n  },\n  render() {\n    const { $slots, resultSet, error, loading, sqlQuery } = this;\n    const empty = createElement('div', {});\n    let slot = this.$slots.empty ? this.$slots.empty() : empty;\n    let controls = createElement('div', {});\n    const onlyDefault = !('empty' in this.$slots) && !('error' in this.$slots);\n\n    if ($slots.builder && this.builderProps.measures) {\n      controls = $slots.builder({ ...this.builderProps });\n    }\n\n    if ((!loading && resultSet && !error) || onlyDefault) {\n      let slotProps = {\n        resultSet,\n        sqlQuery,\n        query: this.builderProps.query || this.query,\n      };\n\n      if (onlyDefault) {\n        slotProps = {\n          loading,\n          error,\n          refetch: this.load,\n          ...this.builderProps,\n          ...slotProps,\n        };\n      }\n      slot = $slots.default ? $slots.default(slotProps) : slot;\n    } else if (error) {\n      slot = $slots.error ? $slots.error({ error, sqlQuery }) : slot;\n    }\n\n    return createElement('div', {}, [controls, slot]);\n  },\n  methods: {\n    async load() {\n      const { query } = this;\n\n      if (!isQueryPresent(query)) {\n        return;\n      }\n\n      try {\n        this.loading = true;\n        this.error = null;\n        this.resultSet = null;\n\n        if (this.loadSql === 'only') {\n          this.sqlQuery = await this.cubejsApi.sql(query, {\n            mutexObj: this.mutexObj,\n            mutexKey: 'sql',\n          });\n        } else if (this.loadSql) {\n          this.sqlQuery = await this.cubejsApi.sql(query, {\n            mutexObj: this.mutexObj,\n            mutexKey: 'sql',\n          });\n          this.resultSet = await this.cubejsApi.load(query, {\n            mutexObj: this.mutexObj,\n            mutexKey: 'query',\n          });\n        } else {\n          this.resultSet = await this.cubejsApi.load(query, {\n            mutexObj: this.mutexObj,\n            mutexKey: 'query',\n          });\n        }\n\n        this.loading = false;\n      } catch (error) {\n        this.error = error;\n        this.resultSet = undefined;\n        this.loading = false;\n      }\n    },\n    async loadQueries() {\n      const { queries } = this;\n      try {\n        this.error = undefined;\n        this.loading = true;\n\n        const resultPromises = Promise.all(\n          toPairs(queries).map(([name, query]) =>\n            this.cubejsApi\n              .load(query, {\n                mutexObj: this.mutexObj,\n                mutexKey: name,\n              })\n              .then((r) => [name, r])\n          )\n        );\n\n        this.resultSet = fromPairs(await resultPromises);\n        this.loading = false;\n      } catch (error) {\n        this.error = error;\n        this.loading = false;\n      }\n    },\n  },\n  watch: {\n    loading(loading) {\n      if (loading === false) {\n        this.$emit('queryStatus', {\n          isLoading: false,\n          error: this.error,\n          resultSet: this.resultSet,\n        });\n      } else {\n        this.$emit('queryStatus', { isLoading: true });\n      }\n    },\n    cubejsApi() {\n      this.load();\n    },\n    chartType() {\n      this.load();\n    },\n    query: {\n      deep: true,\n      handler(query, prevQuery) {\n        if (!areQueriesEqual(query, prevQuery)) {\n          this.load();\n        }\n      },\n    },\n    queries: {\n      handler(val) {\n        if (val) {\n          this.loadQueries();\n        }\n      },\n      deep: true,\n    },\n  },\n};\n","import {\n  isQueryPresent,\n  defaultOrder,\n  defaultHeuristics,\n  GRANULARITIES,\n  ResultSet,\n  getOrderMembersFromOrder,\n  moveItemInArray,\n  movePivotItem,\n  areQueriesEqual,\n} from '@cubejs-client/core';\nimport { h } from 'vue';\nimport { clone, equals } from 'ramda';\n\nimport QueryRenderer from './QueryRenderer';\n\nconst QUERY_ELEMENTS = ['measures', 'dimensions', 'segments', 'timeDimensions', 'filters'];\n\nconst toOrderMember = (member) => ({\n  id: member.name,\n  title: member.title,\n});\n\nconst reduceOrderMembers = (array) =>\n  array.reduce((acc, { id, order }) => (order !== 'none' ? [...acc, [id, order]] : acc), []);\n\nconst operators = [ 'and', 'or' ]\n\nconst validateFilters = (filters) =>\n  filters.reduce((acc, raw) => {\n    if (raw.operator) {\n      return [...acc, raw];\n    }\n\n    const validBooleanFilter = operators.reduce((acc, operator) => {\n      const filters = raw[operator];\n\n      const booleanFilters = validateFilters(filters || []);\n\n      if (booleanFilters.length) {\n        return { ...acc, [operator]: booleanFilters };\n      }\n\n      return acc;\n    }, {});\n\n    if (operators.some((operator) => validBooleanFilter[operator])) {\n      return [...acc, validBooleanFilter];\n    }\n\n    return acc;\n  }, []);\n\nconst getDimensionOrMeasure = (meta, m) => {\n  const memberName = m.member || m.dimension;\n  return memberName && meta.resolveMember(memberName, ['dimensions', 'measures']);\n};\n\nconst resolveMembers = (meta, arr) =>\n  arr &&\n  arr.map((e, index) => {\n    return {\n      ...e,\n      member: getDimensionOrMeasure(meta, e),\n      index,\n      and: resolveMembers(meta, e.and),\n      or: resolveMembers(meta, e.or),\n    };\n  });\n\nexport default {\n  components: {\n    QueryRenderer,\n  },\n  props: {\n    query: {\n      type: Object,\n      default: () => ({}),\n    },\n    cubejsApi: {\n      type: Object,\n      required: true,\n    },\n    initialChartType: {\n      type: String,\n      default: () => 'line',\n    },\n    disableHeuristics: {\n      type: Boolean,\n    },\n    stateChangeHeuristics: {\n      type: Function,\n    },\n    initialVizState: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  data() {\n    const {\n      query = this.query,\n      chartType = this.initialChartType,\n      pivotConfig,\n    } = this.initialVizState;\n\n    return {\n      initialQuery: query,\n      skipHeuristics: true,\n      meta: undefined,\n      mutex: {},\n      chartType,\n      measures: [],\n      dimensions: [],\n      segments: [],\n      timeDimensions: [],\n      filters: [],\n      availableMeasures: [],\n      availableDimensions: [],\n      availableTimeDimensions: [],\n      availableSegments: [],\n      limit: null,\n      offset: null,\n      renewQuery: false,\n      order: null,\n      prevValidatedQuery: null,\n      granularities: GRANULARITIES,\n      pivotConfig: ResultSet.getNormalizedPivotConfig(query || {}, pivotConfig),\n    };\n  },\n\n  render() {\n    const {\n      chartType,\n      cubejsApi,\n      dimensions,\n      filters,\n      measures,\n      meta,\n      query,\n      segments,\n      timeDimensions,\n      validatedQuery,\n      isQueryPresent,\n      availableSegments,\n      availableTimeDimensions,\n      availableDimensions,\n      availableMeasures,\n      limit,\n      offset,\n      setLimit,\n      removeLimit,\n      setOffset,\n      removeOffset,\n      renewQuery,\n      order,\n      orderMembers,\n    } = this;\n\n    let builderProps = {};\n\n    if (meta) {\n      builderProps = {\n        query,\n        validatedQuery,\n        isQueryPresent,\n        chartType,\n        measures,\n        dimensions,\n        segments,\n        timeDimensions,\n        filters,\n        availableSegments,\n        availableTimeDimensions,\n        availableDimensions,\n        availableMeasures,\n        updateChartType: this.updateChart,\n        limit,\n        offset,\n        setLimit,\n        removeLimit,\n        setOffset,\n        removeOffset,\n        renewQuery,\n        order,\n        orderMembers,\n        setOrder: this.setOrder,\n        pivotConfig: this.pivotConfig,\n        updateOrder: {\n          set: (memberId, newOrder) => {\n            this.order = reduceOrderMembers(\n              orderMembers.map((orderMember) => ({\n                ...orderMember,\n                order: orderMember.id === memberId ? newOrder : orderMember.order,\n              }))\n            );\n          },\n          update: (newOrder) => {\n            this.order = newOrder;\n          },\n          reorder: (sourceIndex, destinationIndex) => {\n            this.order = reduceOrderMembers(\n              moveItemInArray(orderMembers, sourceIndex, destinationIndex)\n            );\n          },\n        },\n        updatePivotConfig: {\n          moveItem: ({ sourceIndex, destinationIndex, sourceAxis, destinationAxis }) => {\n            this.pivotConfig = movePivotItem(\n              this.pivotConfig,\n              sourceIndex,\n              destinationIndex,\n              sourceAxis,\n              destinationAxis\n            );\n          },\n          update: (pivotConfig) => {\n            this.pivotConfig = {\n              x: pivotConfig.x || this.pivotConfig.x,\n              y: pivotConfig.y || this.pivotConfig.y,\n            };\n          },\n        },\n      };\n\n      QUERY_ELEMENTS.forEach((elementName) => {\n        const name = elementName.charAt(0).toUpperCase() + elementName.slice(1);\n\n        builderProps[`add${name}`] = (member) => {\n          this.addMember(elementName, member);\n        };\n\n        builderProps[`update${name}`] = (member, updateWith) => {\n          this.updateMember(elementName, member, updateWith);\n        };\n\n        builderProps[`remove${name}`] = (member) => {\n          this.removeMember(elementName, member);\n        };\n\n        builderProps[`set${name}`] = (members) => {\n          this.setMembers(elementName, members);\n        };\n      });\n    }\n\n    return h(\n      QueryRenderer,\n      {\n        query: this.validatedQuery,\n        cubejsApi,\n        builderProps,\n        slots: this.$slots,\n        on: {\n          queryStatus: (event) => {\n            this.$emit('queryStatus', event);\n          },\n        },\n      },\n      this.$slots\n    );\n  },\n  computed: {\n    isQueryPresent() {\n      const { validatedQuery } = this;\n\n      return isQueryPresent(validatedQuery);\n    },\n    orderMembers() {\n      return getOrderMembersFromOrder(\n        [\n          ...this.measures,\n          ...this.dimensions,\n          ...this.timeDimensions.map(({ dimension }) => toOrderMember(dimension)),\n        ]\n          .map((member, index) => {\n            const id = member.name || member.id;\n\n            if (!id) {\n              return false;\n            }\n\n            return {\n              index,\n              id,\n              title: member.title,\n            };\n          })\n          .filter(Boolean),\n        this.order\n      );\n    },\n    vizState() {\n      return {\n        query: this.validatedQuery,\n        chartType: this.chartType,\n        pivotConfig: this.pivotConfig,\n      };\n    },\n    validatedQuery() {\n      let validatedQuery = {};\n      let toQuery = (member) => member.name;\n      // TODO: implement timezone\n\n      let hasElements = false;\n      QUERY_ELEMENTS.forEach((element) => {\n        if (element === 'timeDimensions') {\n          toQuery = (member) => ({\n            dimension: member.dimension.name,\n            granularity: member.granularity,\n            dateRange: member.dateRange,\n          });\n        } else if (element === 'filters') {\n          toQuery = (member) => ({\n            member: member.member && member.member.name,\n            operator: member.operator,\n            values: member.values,\n            and: member.and && member.and.map(toQuery),\n            or: member.or && member.or.map(toQuery),\n          });\n        }\n\n        if (this[element].length > 0) {\n          validatedQuery[element] = this[element].map((x) => toQuery(x));\n\n          hasElements = true;\n        }\n      });\n\n      if (validatedQuery.filters) {\n        validatedQuery.filters = validateFilters(validatedQuery.filters)\n      }\n\n      // only set limit and offset if there are elements otherwise an invalid request with just limit/offset\n      // gets sent when the component is first mounted, but before the actual query is constructed.\n      if (hasElements) {\n        if (this.limit) {\n          validatedQuery.limit = this.limit;\n        }\n\n        if (this.offset) {\n          validatedQuery.offset = this.offset;\n        }\n\n        if (this.order) {\n          validatedQuery.order = this.order;\n        }\n\n        if (this.renewQuery) {\n          validatedQuery.renewQuery = this.renewQuery;\n        }\n      }\n\n      if (\n        !this.skipHeuristics &&\n        !this.disableHeuristics &&\n        isQueryPresent(validatedQuery) &&\n        this.meta\n      ) {\n        const heuristicsFn = this.stateChangeHeuristics || defaultHeuristics;\n        const { query, chartType, shouldApplyHeuristicOrder, pivotConfig } = heuristicsFn(\n          {\n            query: validatedQuery,\n            chartType: this.chartType,\n          },\n          this.prevValidatedQuery,\n          {\n            meta: this.meta,\n            sessionGranularity: validatedQuery?.timeDimensions?.[0]?.granularity,\n          }\n        );\n\n        validatedQuery = {\n          ...validatedQuery,\n          ...query,\n          ...(shouldApplyHeuristicOrder ? { order: defaultOrder(query) } : null),\n        };\n\n        this.chartType = chartType || this.chartType;\n        this.pivotConfig = ResultSet.getNormalizedPivotConfig(\n          validatedQuery,\n          pivotConfig || this.pivotConfig\n        );\n        this.copyQueryFromProps(validatedQuery);\n      }\n\n      // query heuristics should only apply on query change (not applied to the initial query)\n      if (this.prevValidatedQuery !== null) {\n        this.skipHeuristics = false;\n      }\n\n      this.prevValidatedQuery = validatedQuery;\n      return validatedQuery;\n    },\n  },\n\n  async mounted() {\n    this.meta = await this.cubejsApi.meta();\n\n    this.copyQueryFromProps();\n\n    if (isQueryPresent(this.initialQuery)) {\n      const dryRunResponse = await this.cubejsApi.dryRun(this.initialQuery);\n      this.pivotConfig = ResultSet.getNormalizedPivotConfig(\n        dryRunResponse?.pivotQuery || {},\n        this.pivotConfig\n      );\n    }\n  },\n\n  methods: {\n    copyQueryFromProps(query) {\n      const {\n        measures = [],\n        dimensions = [],\n        segments = [],\n        timeDimensions = [],\n        filters = [],\n        limit,\n        offset,\n        renewQuery,\n        order,\n      } = query || this.initialQuery;\n\n      this.measures = measures.map((m, index) => ({\n        index,\n        ...this.meta.resolveMember(m, 'measures'),\n      }));\n      this.dimensions = dimensions.map((m, index) => ({\n        index,\n        ...this.meta.resolveMember(m, 'dimensions'),\n      }));\n      this.segments = segments.map((m, index) => ({\n        index,\n        ...this.meta.resolveMember(m, 'segments'),\n      }));\n      this.timeDimensions = timeDimensions.map((m, index) => ({\n        ...m,\n        dimension: {\n          ...this.meta.resolveMember(m.dimension, 'dimensions'),\n          granularities: this.granularities,\n        },\n        index,\n      }));\n\n      const memberTypes = ['dimensions', 'measures'];\n      this.filters = filters.map((m, index) => {\n        const memberName = m.member || m.dimension;\n        return {\n          ...m,\n          member: memberName && this.meta.resolveMember(memberName, memberTypes),\n          operators: memberName && this.meta.filterOperatorsForMember(memberName, memberTypes),\n          and: resolveMembers(this.meta, m.and),\n          or: resolveMembers(this.meta, m.or),\n          index,\n        };\n      });\n\n      this.availableMeasures = this.meta.membersForQuery({}, 'measures') || [];\n      this.availableDimensions = this.meta.membersForQuery({}, 'dimensions') || [];\n      this.availableTimeDimensions = (this.meta.membersForQuery({}, 'dimensions') || []).filter(\n        (m) => m.type === 'time'\n      );\n      this.availableSegments = this.meta.membersForQuery({}, 'segments') || [];\n      this.limit = limit || 10000;\n      this.offset = offset || null;\n      this.renewQuery = renewQuery || false;\n      this.order = order || null;\n    },\n    addMember(element, member) {\n      const name = element.charAt(0).toUpperCase() + element.slice(1);\n      let mem;\n\n      if (element === 'timeDimensions') {\n        mem = this[`available${name}`].find((m) => m.name === member.dimension);\n        if (mem) {\n          const dimension = {\n            ...this.meta.resolveMember(mem.name, 'dimensions'),\n            granularities: this.granularities,\n          };\n\n          mem = {\n            ...mem,\n            granularity: member.granularity,\n            dateRange: member.dateRange,\n            dimension,\n            index: this[element].length,\n          };\n        }\n      } else if (element === 'filters') {\n        mem = {\n          ...member,\n          and: resolveMembers(this.meta, member.and),\n          or: resolveMembers(this.meta, member.or),\n          member: getDimensionOrMeasure(this.meta, member),\n        }\n      } else {\n        mem = this[`available${name}`].find((m) => m.name === member);\n      }\n\n      if (mem) {\n        this[element].push(mem);\n      }\n    },\n    removeMember(element, member) {\n      const name = element.charAt(0).toUpperCase() + element.slice(1);\n      let mem;\n\n      if (element === 'timeDimensions') {\n        mem = this[`available${name}`].find((x) => x.name === member);\n      } else if (element === 'filters') {\n        mem = member;\n      } else {\n        mem = this[`available${name}`].find((m) => m.name === member);\n      }\n\n      if (mem) {\n        const index = this[element].findIndex((x) => x.name === mem);\n        this[element].splice(index, 1);\n      }\n    },\n    updateMember(element, old, member) {\n      const name = element.charAt(0).toUpperCase() + element.slice(1);\n      let mem;\n      let index;\n\n      if (element === 'timeDimensions') {\n        index = this[element].findIndex((x) => x.dimension.name === old.dimension);\n        mem = this[`available${name}`].find((m) => m.name === member.dimension);\n        if (mem) {\n          const dimension = {\n            ...this.meta.resolveMember(mem.name, 'dimensions'),\n            granularities: this.granularities,\n          };\n\n          mem = {\n            ...mem,\n            dimension,\n            granularity: member.granularity,\n            dateRange: member.dateRange,\n            index,\n          };\n        }\n      } else if (element === 'filters') {\n        index = this[element].findIndex((x) => x.dimension === old);\n        mem = {\n          ...member,\n          and: resolveMembers(this.meta, member.and),\n          or: resolveMembers(this.meta, member.or),\n          member: getDimensionOrMeasure(this.meta, member),\n        };\n      } else {\n        index = this[element].findIndex((x) => x.name === old);\n        mem = this[`available${name}`].find((m) => m.name === member);\n      }\n\n      if (mem) {\n        this[element].splice(index, 1, mem);\n      }\n    },\n    setMembers(element, members) {\n      const name = element.charAt(0).toUpperCase() + element.slice(1);\n      let mem;\n      const elements = [];\n\n      members.filter(Boolean).forEach((m) => {\n        if (element === 'timeDimensions') {\n          mem = this[`available${name}`].find((x) => x.name === m.dimension);\n          if (mem) {\n            const dimension = {\n              ...this.meta.resolveMember(mem.name, 'dimensions'),\n              granularities: this.granularities,\n            };\n\n            mem = {\n              ...mem,\n              granularity: m.granularity,\n              dateRange: m.dateRange,\n              dimension,\n              index: this[element].length,\n            };\n          }\n        } else if (element === 'filters') {\n          mem = {\n            ...m,\n            and: resolveMembers(this.meta, m.and),\n            or: resolveMembers(this.meta, m.or),\n            member: getDimensionOrMeasure(this.meta, m),\n          };\n        } else {\n          mem = this[`available${name}`].find((x) => x.name === m);\n        }\n\n        if (mem) {\n          elements.push(mem);\n        }\n      });\n\n      this[element] = elements;\n    },\n    setLimit(limit) {\n      this.limit = limit;\n    },\n    removeLimit() {\n      this.limit = null;\n    },\n    setOffset(offset) {\n      this.offset = offset;\n    },\n    removeOffset() {\n      this.offset = null;\n    },\n    updateChart(chartType) {\n      this.chartType = chartType;\n    },\n    setOrder(order = {}) {\n      this.order = order;\n    },\n    emitVizStateChange(partialVizState) {\n      this.$emit(\n        'vizStateChange',\n        clone({\n          ...this.vizState,\n          ...partialVizState,\n        })\n      );\n    },\n  },\n\n  watch: {\n    validatedQuery: {\n      deep: true,\n      handler(query, prevQuery) {\n        const hasQueryChanged = !areQueriesEqual(query, prevQuery);\n\n        if (hasQueryChanged) {\n          this.emitVizStateChange({\n            query,\n          });\n        }\n\n        if (isQueryPresent(query) && hasQueryChanged) {\n          this.cubejsApi\n            .dryRun(query, {\n              mutexObj: this.mutex,\n            })\n            .then(({ pivotQuery }) => {\n              const pivotConfig = ResultSet.getNormalizedPivotConfig(pivotQuery, this.pivotConfig);\n\n              if (!equals(pivotConfig, this.pivotConfig)) {\n                this.pivotConfig = pivotConfig;\n              }\n            })\n            .catch((error) => console.error(error));\n        }\n      },\n    },\n    query: {\n      deep: true,\n      handler(query) {\n        if (!this.meta) {\n          // this is ok as if meta has not been loaded by the time query prop has changed,\n          // then the promise for loading meta (found in mounted()) will call\n          // copyQueryFromProps and will therefore update anyway.\n          return;\n        }\n        this.copyQueryFromProps(query);\n      },\n    },\n    pivotConfig: {\n      deep: true,\n      handler(pivotConfig, prevPivotConfig) {\n        if (!equals(pivotConfig, prevPivotConfig)) {\n          this.emitVizStateChange({\n            pivotConfig,\n          });\n        }\n      },\n    },\n    chartType(value) {\n      this.emitVizStateChange({\n        chartType: value,\n      });\n    },\n  },\n};\n","import { GRANULARITIES } from '@cubejs-client/core';\n\nimport QueryRenderer from './QueryRenderer';\nimport QueryBuilder from './QueryBuilder';\n\nexport { QueryRenderer, QueryBuilder, GRANULARITIES };\n\nexport default {};\n"],"names":["props","query","type","Object","Array","queries","loadSql","required","cubejsApi","builderProps","chartType","String","data","mutexObj","error","undefined","resultSet","loading","sqlQuery","mounted","isQueryPresent","load","loadQueries","render","$slots","empty","createElement","slot","controls","onlyDefault","builder","measures","slotProps","refetch","methods","sql","mutexKey","resultPromises","Promise","all","toPairs","map","name","then","r","fromPairs","watch","$emit","isLoading","deep","handler","prevQuery","areQueriesEqual","val","QUERY_ELEMENTS","toOrderMember","member","id","title","reduceOrderMembers","array","reduce","acc","order","operators","validateFilters","filters","raw","operator","validBooleanFilter","booleanFilters","length","some","getDimensionOrMeasure","meta","m","memberName","dimension","resolveMember","resolveMembers","arr","e","index","and","or","components","QueryRenderer","initialChartType","disableHeuristics","Boolean","stateChangeHeuristics","Function","initialVizState","pivotConfig","initialQuery","skipHeuristics","mutex","dimensions","segments","timeDimensions","availableMeasures","availableDimensions","availableTimeDimensions","availableSegments","limit","offset","renewQuery","prevValidatedQuery","granularities","GRANULARITIES","ResultSet","getNormalizedPivotConfig","validatedQuery","setLimit","removeLimit","setOffset","removeOffset","orderMembers","updateChartType","updateChart","setOrder","updateOrder","set","memberId","newOrder","orderMember","update","reorder","sourceIndex","destinationIndex","moveItemInArray","updatePivotConfig","moveItem","sourceAxis","destinationAxis","movePivotItem","x","y","forEach","elementName","charAt","toUpperCase","slice","addMember","updateWith","updateMember","removeMember","members","setMembers","h","slots","on","queryStatus","event","computed","getOrderMembersFromOrder","filter","vizState","toQuery","hasElements","element","granularity","dateRange","values","heuristicsFn","defaultHeuristics","sessionGranularity","shouldApplyHeuristicOrder","defaultOrder","copyQueryFromProps","dryRun","dryRunResponse","pivotQuery","memberTypes","filterOperatorsForMember","membersForQuery","mem","find","push","findIndex","splice","old","elements","emitVizStateChange","partialVizState","clone","hasQueryChanged","equals","console","prevPivotConfig","value"],"mappings":"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"}